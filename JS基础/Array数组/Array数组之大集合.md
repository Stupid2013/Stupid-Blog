## Arrayæ•°ç»„æ–¹æ³•å¤§é›†åˆ

2017-12-06

åœ¨æˆ‘ä»¬çš„å®é™…å¼€å‘ä¸­ï¼Œæ•°ç»„å¯è°“æ˜¯ç”¨åˆ°çš„æœ€å¸¸è§çš„æ•°æ®ç»“æ„äº†ï¼Œéšç€jsçš„å‘å±•ï¼Œå®ƒçš„ç”¨æ³•ä¹Ÿè¶Šæ¥è¶Šâ€œé«˜å¤§ä¸Šâ€ï¼Œè¶Šæ¥è¶Šå¼ºå¤§ã€‚ä½œä¸ºä¸€åå°èœé¸Ÿï¼Œä¹Ÿåªå¯¹å®ƒä¸€äº›å¸¸ç”¨çš„æ–¹æ³•æ¯”è¾ƒç†Ÿæ‚‰ï¼Œæœ‰çš„æ—¶å€™ç”šè‡³å¸¸ç”¨çš„éƒ½ä¸ç†Ÿæ‚‰ã€‚ã€‚ã€‚å•Šï¼Œè¯´æ¥æƒ­æ„§ã€‚å› æ­¤ä¸€ç›´æƒ³è¦æ€»ç»“ä¹‹ï¼Œé‚£ä¹ˆï¼Œä»Šå¤©ï¼å°±æ˜¯è¿™ä¸€ä¼Ÿå¤§æ—¶åˆ»ï¼ï¼ğŸ˜

é›†ä½“ç…§ï¼š

    valueOf(), toString(), push(), pop(), join(), concat(), shift(), unshift(), reverse(), slice(), splice(), sort()
    es5æ–°å¢: forEach(), map(), filter(), some(), every(), indexOf(), lastIndexOf(), reduce(), reduceRight()
    es6æ–°å¢ï¼š Array.from(), Array.of(), copyWithin(), find(), findIndex(), fill(), entries(), keys(), values(), includes()
    æ³¨ï¼šè¿™äº›éƒ½æ˜¯Arrayå®ä¾‹çš„æ–¹æ³•ã€‚

 **æ³¨ï¼š Array.isArray(a)å¯ä»¥ç”¨æ¥åˆ¤æ–­aæ˜¯ä¸æ˜¯æ•°ç»„ã€‚**

æ¥ä¸‹æ¥å¯¹æ¯ä¸€ä¸ªæ–¹æ³•çš„ç”¨æ³•è¯¦ç»†è¯´æ˜ã€‚

### valueOf()å’ŒtoString()

`valueOf()`è¿”å›æ•°ç»„æœ¬èº«ï¼Œ`toString()`è¿”å›æ•°ç»„çš„å­—ç¬¦ä¸²å½¢å¼ã€‚

```javascript
var a = [1,2,3];
a.valueOf(); //--> [1,2,3]

var b = [1,2,3,[4,5]];
b.toString(); //--> "1,2,3,4,5"
```
### push()

`push()`ç”¨äºå‘æ•°ç»„**æœ«ç«¯**æ·»åŠ å…ƒç´ ï¼Œå¹¶è¿”å›æ·»åŠ æ–°å…ƒç´ åçš„æ•°ç»„é•¿åº¦ã€‚**è¯¥æ–¹æ³•ä¼šæ”¹å˜åŸæ•°ç»„**

```javascript
var a = [];
a.push(1); // 1
a.push('a'); // 2
a.push(true, {}); // 4
console.log(a); //--> [1, 'a', true, {}]
```
åˆå¹¶ä¸¤ä¸ªæ•°ç»„ï¼š

```javascript
var a = [1, 2, 3];
var b = [4, 5, 6];

Array.prototype.push.apply(a, b)
// æˆ–è€…
a.push.apply(a, b)

// ä¸Šé¢ä¸¤ç§å†™æ³•ç­‰åŒäº
a.push(4, 5, 6)

a // [1, 2, 3, 4, 5, 6]
```

`push`æ–¹æ³•è¿˜å¯ä»¥ç”¨äºå‘å¯¹è±¡æ·»åŠ å…ƒç´ ï¼Œæ·»åŠ åçš„å¯¹è±¡å˜æˆç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼Œå³æ–°åŠ å…¥å…ƒç´ çš„é”®å¯¹åº”æ•°ç»„çš„ç´¢å¼•ï¼Œå¹¶ä¸”å¯¹è±¡æœ‰ä¸€ä¸ª`length`å±æ€§ã€‚

```javascript
var a = {a: 1};

[].push.call(a, 2);
a // {0:2, a:1, length: 1}

[].push.call(a, [3]);
a // {0:2, 1:[3], a:1, length: 2}
```

### pop()

`pop()`ç”¨äºåˆ é™¤æ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›è¯¥å…ƒç´ ã€‚**è¯¥æ–¹æ³•ä¼šæ”¹å˜åŸæ•°ç»„ã€‚**

```javascript
var a = [1,2,3];
a.pop(); // 3
a // [1,2]
```

æ³¨: å¯¹ç©ºæ•°ç»„ä½¿ç”¨`pop`æ–¹æ³•ï¼Œè¿”å›`undefined`
```javascript
[].pop() // undefined
```

### join()

`join`æ–¹æ³•ä»¥å‚æ•°ä½œä¸ºåˆ†éš”ç¬¦ï¼Œå°†æ‰€æœ‰æ•°ç»„æˆå‘˜ç»„æˆä¸€ä¸ªå­—ç¬¦ä¸²è¿”å›ã€‚å¦‚æœä¸æä¾›å‚æ•°ï¼Œé»˜è®¤ç”¨é€—å·åˆ†éš”ã€‚

```javascript
var a = [1, 2, 3, 4];
a.join(' ') // '1 2 3 4'
a.join(' | ') // "1 | 2 | 3 | 4"
a.join() // "1,2,3,4"
```

å¦‚æœæ•°ç»„æˆå‘˜æ˜¯`undefined`æˆ–`null`æˆ–ç©ºä½ï¼Œä¼šè¢«è½¬æˆç©ºå­—ç¬¦ä¸²ã€‚

```javascript
[undefined, null].join('#')
// '#'

['a',, 'b'].join('-')
// 'a--b'
```

é€šè¿‡`call`æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¹Ÿå¯ä»¥ç”¨äºå­—ç¬¦ä¸²ã€‚

```javascript
Array.prototype.join.call('hello', '-')
// "h-e-l-l-o"
```

`join()`ä¹Ÿå¯ä»¥ç”¨äºç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ã€‚

```javascript
var obj = { 0: 'a', 1: 'b', length: 2 };
Array.prototype.join.call(obj, '-')
// 'a-b'
```

### concat()

`concat`æ–¹æ³•ç”¨äºå¤šä¸ªæ•°ç»„çš„åˆå¹¶ã€‚å®ƒå°†æ–°æ•°ç»„çš„æˆå‘˜ï¼Œæ·»åŠ åˆ°åŸæ•°ç»„æˆå‘˜çš„åé¢ï¼Œç„¶åè¿”å›ä¸€ä¸ª**æ–°æ•°ç»„**(åŸæ•°ç»„çš„æ‹·è´)ï¼Œ**åŸæ•°ç»„ä¸å˜**ã€‚

```javascript
['hello'].concat(['world'])
// ["hello", "world"]

['hello'].concat(['world'], ['!'])
// ["hello", "world", "!"]
```

`concat`ä¹Ÿå¯ä»¥æ¥å—å…¶ä»–ç±»å‹çš„å€¼ä½œä¸ºå‚æ•°ã€‚å®ƒä»¬ä¼šä½œä¸ºæ–°çš„å…ƒç´ ï¼Œæ·»åŠ æ•°ç»„å°¾éƒ¨ã€‚

```javascript
[1, 2, 3].concat(4, 5, 6)
// [1, 2, 3, 4, 5, 6]

// ç­‰åŒäº
[1, 2, 3].concat(4, [5, 6])
[1, 2, 3].concat([4], [5, 6])
```

å¦‚æœä¸æä¾›å‚æ•°ï¼Œ`concat`æ–¹æ³•è¿”å›å½“å‰æ•°ç»„çš„ä¸€ä¸ªæµ…æ‹·è´ã€‚æ‰€è°“â€œæµ…æ‹·è´â€ï¼ŒæŒ‡çš„æ˜¯å¦‚æœæ•°ç»„æˆå‘˜åŒ…æ‹¬å¤åˆç±»å‹çš„å€¼ï¼ˆæ¯”å¦‚å¯¹è±¡ï¼‰ï¼Œåˆ™æ–°æ•°ç»„æ‹·è´çš„æ˜¯è¯¥å€¼çš„å¼•ç”¨ã€‚

```javascript
var obj = { a:1 };  // æ¢æˆæ˜¯æ•°ç»„ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œæ”¹å˜æ•°ç»„çš„å€¼ï¼Œå°±ä¿©éƒ½å˜äº† ğŸ˜
var oldArray = [obj];

var newArray = oldArray.concat();

obj.a = 2;
newArray[0].a // 2
```

ä¸Šé¢ä»£ç ä¸­ï¼ŒåŸæ•°ç»„åŒ…å«ä¸€ä¸ªå¯¹è±¡ï¼Œ`concat`æ–¹æ³•ç”Ÿæˆçš„æ–°æ•°ç»„åŒ…å«è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨ã€‚æ‰€ä»¥ï¼Œæ”¹å˜åŸå¯¹è±¡ä»¥åï¼Œæ–°æ•°ç»„è·Ÿç€æ”¹å˜ã€‚äº‹å®ä¸Šï¼Œåªè¦åŸæ•°ç»„çš„æˆå‘˜ä¸­åŒ…å«å¯¹è±¡ï¼Œ`concat`æ–¹æ³•ä¸ç®¡æœ‰æ²¡æœ‰å‚æ•°ï¼Œæ€»æ˜¯è¿”å›è¯¥å¯¹è±¡çš„å¼•ç”¨ã€‚


`concat`æ–¹æ³•ä¹Ÿå¯ä»¥ç”¨äºå°†å¯¹è±¡åˆå¹¶ä¸ºæ•°ç»„ã€‚

```javascript
[].concat({a: 1}, {b: 2})
// [{ a: 1 }, { b: 2 }]

[].concat({a: 1}, [2])
// [{a: 1}, 2]

[2].concat({a: 1})
// [2, {a: 1}]
```

### shift()

`shift`æ–¹æ³•ç”¨äºåˆ é™¤æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›**è¯¥å…ƒç´ **ã€‚**è¯¥æ–¹æ³•ä¼šæ”¹å˜åŸæ•°ç»„**

```javascript
var a = ['a', 'b', 'c'];

a.shift() // 'a'
a // ['b', 'c']
```

`shift`æ–¹æ³•å¯ä»¥éå†å¹¶æ¸…ç©ºä¸€ä¸ªæ•°ç»„ã€‚

```javascript
var list = [1, 2, 3, 4, 5, 6];
var item;

while (item = list.shift()) {
  console.log(item);
}

list // []
```
### unshift()

`unshift`æ–¹æ³•ç”¨äºåœ¨æ•°ç»„çš„ç¬¬ä¸€ä¸ªä½ç½®æ·»åŠ å…ƒç´ ï¼Œå¹¶è¿”å›æ·»åŠ æ–°å…ƒç´ åçš„**æ•°ç»„é•¿åº¦**ã€‚**è¯¥æ–¹æ³•ä¼šæ”¹å˜åŸæ•°ç»„**

```javascript
var a = ['a', 'b', 'c'];

a.unshift('x'); // 4
a // ['x', 'a', 'b', 'c']
```

`unshift`æ–¹æ³•å¯ä»¥åœ¨æ•°ç»„å¤´éƒ¨æ·»åŠ å¤šä¸ªå…ƒç´ ã€‚

```javascript
var arr = [ 'c', 'd' ];
arr.unshift('a', 'b') // 4
arr // [ 'a', 'b', 'c', 'd' ]
```

### reverse()

`reverse`æ–¹æ³•ç”¨äºé¢ å€’æ•°ç»„ä¸­å…ƒç´ çš„é¡ºåºï¼Œè¿”å›**æ”¹å˜åçš„æ•°ç»„**ã€‚**è¯¥æ–¹æ³•å°†æ”¹å˜åŸæ•°ç»„**

```javascript
var a = ['a', 'b', 'c'];
a.reverse() // ["c", "b", "a"]
a // ["c", "b", "a"]
```

### slice()

`slice`æ–¹æ³•ç”¨äºæˆªå–åŸæ•°ç»„çš„ä¸€éƒ¨åˆ†ï¼Œè¿”å›ä¸€ä¸ªæ–°æ•°ç»„ï¼Œ**åŸæ•°ç»„ä¸å˜**ã€‚

å®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºèµ·å§‹ä½ç½®ï¼ˆä»0å¼€å§‹ï¼‰ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºç»ˆæ­¢ä½ç½®ï¼ˆä½†è¯¥ä½ç½®çš„å…ƒç´ æœ¬èº«ä¸åŒ…æ‹¬åœ¨å†…ï¼‰ã€‚å¦‚æœçœç•¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œåˆ™ä¸€ç›´è¿”å›åˆ°åŸæ•°ç»„çš„æœ€åä¸€ä¸ªæˆå‘˜ã€‚

```javascript
// æ ¼å¼
arr.slice(start_index, end_index);

// ç”¨æ³•
var a = ['a', 'b', 'c'];

a.slice(0) // ["a", "b", "c"]
a.slice(1) // ["b", "c"]
a.slice(1, 2) // ["b"]
a.slice(2, 6) // ["c"]
a.slice() // ["a", "b", "c"]
```

ä¸Šé¢æœ€åä¸€ä¸ªä¾‹å­`slice`æ²¡æœ‰å‚æ•°ï¼Œå®é™…ä¸Šç­‰äºè¿”å›ä¸€ä¸ªåŸæ•°ç»„çš„æ‹·è´ã€‚

å¦‚æœ`slice`æ–¹æ³•çš„å‚æ•°æ˜¯è´Ÿæ•°ï¼Œåˆ™è¡¨ç¤ºå€’æ•°è®¡ç®—çš„ä½ç½®ã€‚

```javascript
var a = ['a', 'b', 'c'];
a.slice(-2) // ["b", "c"]
a.slice(-2, -1) // ["b"]
```

ä¸Šé¢ä»£ç ä¸­ï¼Œ`-2`è¡¨ç¤ºå€’æ•°è®¡ç®—çš„ç¬¬äºŒä¸ªä½ç½®ï¼Œ`-1`è¡¨ç¤ºå€’æ•°è®¡ç®—çš„ç¬¬ä¸€ä¸ªä½ç½®ã€‚

å¦‚æœå‚æ•°å€¼å¤§äºæ•°ç»„æˆå‘˜çš„ä¸ªæ•°ï¼Œæˆ–è€…ç¬¬äºŒä¸ªå‚æ•°å°äºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œåˆ™è¿”å›ç©ºæ•°ç»„ã€‚

```javascript
var a = ['a', 'b', 'c'];
a.slice(4) // []
a.slice(2, 1) // []
```

`slice`æ–¹æ³•çš„ä¸€ä¸ªé‡è¦åº”ç”¨ï¼Œæ˜¯å°†ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ã€‚

```javascript
Array.prototype.slice.call({ 0: 'a', 1: 'b', length: 2 })
// ['a', 'b']

Array.prototype.slice.call(document.querySelectorAll("div"));
Array.prototype.slice.call(arguments);
```

### splice()

`splice`æ–¹æ³•ç”¨äºåˆ é™¤åŸæ•°ç»„çš„ä¸€éƒ¨åˆ†æˆå‘˜ï¼Œå¹¶å¯ä»¥åœ¨è¢«åˆ é™¤çš„ä½ç½®æ·»åŠ å…¥æ–°çš„æ•°ç»„æˆå‘˜ï¼Œ`è¿”å›å€¼æ˜¯è¢«åˆ é™¤çš„å…ƒç´ `ã€‚**è¯¥æ–¹æ³•ä¼šæ”¹å˜åŸæ•°ç»„**ã€‚

`splice`çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯åˆ é™¤çš„èµ·å§‹ä½ç½®ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è¢«åˆ é™¤çš„å…ƒç´ ä¸ªæ•°ã€‚å¦‚æœåé¢è¿˜æœ‰æ›´å¤šçš„å‚æ•°ï¼Œåˆ™è¡¨ç¤ºè¿™äº›å°±æ˜¯è¦è¢«æ’å…¥æ•°ç»„çš„æ–°å…ƒç´ ã€‚

```javascript
// æ ¼å¼
arr.splice(index, count_to_remove, addElement1, addElement2, ...);
// ç”¨æ³•
var a = ['a', 'b', 'c', 'd', 'e', 'f'];
a.splice(4, 2) // ["e", "f"]
a // ["a", "b", "c", "d"]

var a = ['a', 'b', 'c', 'd', 'e', 'f'];
a.splice(4, 2, 1, 2) // ["e", "f"]
a // ["a", "b", "c", "d", 1, 2]
```

èµ·å§‹ä½ç½®å¦‚æœæ˜¯è´Ÿæ•°ï¼Œå°±è¡¨ç¤ºä»å€’æ•°ä½ç½®å¼€å§‹åˆ é™¤ã€‚

```javascript
var a = ['a', 'b', 'c', 'd', 'e', 'f'];
a.splice(-4, 2) // ["c", "d"]
```

å¦‚æœåªæ˜¯å•çº¯åœ°æ’å…¥å…ƒç´ ï¼Œ`splice`æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°å¯ä»¥è®¾ä¸º0ã€‚

```javascript
var a = [1, 1, 1];
a.splice(1, 0, 2) // []
a // [1, 2, 1, 1]
```

å¦‚æœåªæä¾›ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œç­‰åŒäºå°†åŸæ•°ç»„åœ¨æŒ‡å®šä½ç½®æ‹†åˆ†æˆä¸¤ä¸ªæ•°ç»„ã€‚

```javascript
var a = [1, 2, 3, 4];
a.splice(2) // [3, 4]
a // [1, 2]
```

### sort()

`sort`æ–¹æ³•å¯¹æ•°ç»„æˆå‘˜è¿›è¡Œæ’åºï¼Œé»˜è®¤æ˜¯æŒ‰ç…§å­—å…¸é¡ºåºæ’åºã€‚æ’åºåï¼Œ**åŸæ•°ç»„å°†è¢«æ”¹å˜**ã€‚

```javascript
['d', 'c', 'b', 'a'].sort()
// ['a', 'b', 'c', 'd']

[4, 3, 2, 1].sort()
// [1, 2, 3, 4]

[11, 101].sort()
// [101, 11]

[10111, 1101, 111].sort()
// [10111, 1101, 111]
```

ä¸Šé¢ä»£ç çš„æœ€åä¸¤ä¸ªä¾‹å­ï¼Œéœ€è¦ç‰¹æ®Šæ³¨æ„ã€‚**sortæ–¹æ³•ä¸æ˜¯æŒ‰ç…§å¤§å°æ’åº**ï¼Œè€Œæ˜¯æŒ‰ç…§å¯¹åº”å­—ç¬¦ä¸²çš„å­—å…¸é¡ºåºæ’åºã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ•°å€¼ä¼šè¢«å…ˆè½¬æˆå­—ç¬¦ä¸²ï¼Œå†æŒ‰ç…§å­—å…¸é¡ºåºè¿›è¡Œæ¯”è¾ƒï¼Œæ‰€ä»¥`101`æ’åœ¨`11`çš„å‰é¢ã€‚

å¦‚æœæƒ³è®©`sort`æ–¹æ³•æŒ‰ç…§è‡ªå®šä¹‰æ–¹å¼æ’åºï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¡¨ç¤ºæŒ‰ç…§è‡ªå®šä¹‰æ–¹æ³•è¿›è¡Œæ’åºã€‚è¯¥å‡½æ•°æœ¬èº«åˆæ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºè¿›è¡Œæ¯”è¾ƒçš„ä¸¤ä¸ªå…ƒç´ ã€‚å¦‚æœè¿”å›å€¼å¤§äº0ï¼Œè¡¨ç¤ºç¬¬ä¸€ä¸ªå…ƒç´ æ’åœ¨ç¬¬äºŒä¸ªå…ƒç´ åé¢ï¼›å…¶ä»–æƒ…å†µä¸‹ï¼Œéƒ½æ˜¯ç¬¬ä¸€ä¸ªå…ƒç´ æ’åœ¨ç¬¬äºŒä¸ªå…ƒç´ å‰é¢ã€‚

```javascript
[10111, 1101, 111].sort(function (a, b) {
  return a - b;
})
// [111, 1101, 10111]

[
  { name: "å¼ ä¸‰", age: 30 },
  { name: "æå››", age: 24 },
  { name: "ç‹äº”", age: 28  }
].sort(function (o1, o2) {
  return o1.age - o2.age;
})
// [
//   { name: "æå››", age: 24 },
//   { name: "ç‹äº”", age: 28  },
//   { name: "å¼ ä¸‰", age: 30 }
// ]
```

### map()å’ŒforEach()

è§[Arrayæ•°ç»„ä¹‹forEach()å’Œ map()çš„åŒºåˆ«ä»¥åŠå¦‚ä½•å…¼å®¹IE8](./Arrayæ•°ç»„ä¹‹forEach()å’Œmap()çš„åŒºåˆ«ä»¥åŠå¦‚ä½•å…¼å®¹IE8.md)

### filter()

`filter`è¿‡æ»¤æ‰æ•°ç»„ä¸­ä¸æ»¡è¶³æ¡ä»¶çš„å€¼ï¼Œè¿”å›ä¸€ä¸ªæ–°æ•°ç»„ï¼Œ**ä¸æ”¹å˜åŸæ•°ç»„çš„å€¼**ã€‚

```javascript
[1, 2, 3, 4, 5].filter(function (elem) {
  return (elem > 3);
})
// [4, 5]

// é€šè¿‡filteræ–¹æ³•ï¼Œè¿”å›æ•°ç»„arré‡Œé¢æ‰€æœ‰å¸ƒå°”å€¼ä¸ºtrueçš„æˆå‘˜
var arr = [0, 1, 'a', false];

arr.filter(Boolean)
// [1, "a"]
```

`filter`æ–¹æ³•è¿˜å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼ŒæŒ‡å®šæµ‹è¯•å‡½æ•°æ‰€åœ¨çš„ä¸Šä¸‹æ–‡å¯¹è±¡ï¼ˆå³`this`å¯¹è±¡ï¼‰ã€‚

```javascript
var Obj = function () {
  this.MAX = 3;
};

var myFilter = function (item) {
  if (item > this.MAX) {
    return true;
  }
};

var arr = [2, 8, 3, 4, 1, 3, 2, 9];
arr.filter(myFilter, new Obj())
// [8, 4, 9]
```

ä¸Šé¢ä»£ç ä¸­ï¼Œæµ‹è¯•å‡½æ•°`myFilter`å†…éƒ¨æœ‰`this`å¯¹è±¡ï¼Œå®ƒå¯ä»¥è¢«`filter`æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°ç»‘å®šã€‚ä¸Šä¾‹ä¸­ï¼Œ`myFilter`çš„`this`ç»‘å®šäº†`Obj`å¯¹è±¡çš„å®ä¾‹ï¼Œè¿”å›å¤§äº3çš„æˆå‘˜ã€‚

### some(), every()

éƒ½è¿”å›å¸ƒå°”å€¼ï¼Œ`some`æ–¹æ³•æ˜¯åªè¦æœ‰ä¸€ä¸ªæ•°ç»„æˆå‘˜çš„è¿”å›å€¼æ˜¯`true`ï¼Œåˆ™æ•´ä¸ª`some`æ–¹æ³•çš„è¿”å›å€¼å°±æ˜¯`true`ï¼Œå¦åˆ™`false`;`every`æ–¹æ³•åˆ™æ˜¯æ‰€æœ‰æ•°ç»„æˆå‘˜çš„è¿”å›å€¼éƒ½æ˜¯`true`ï¼Œæ‰è¿”å›`true`ï¼Œå¦åˆ™falseã€‚**éƒ½ä¸æ”¹å˜åŸæ•°ç»„**ã€‚

```javascript
var arr = [1, 2, 3, 4, 5];
arr.some(function (elem, index, arr) {
  return elem >= 3;
});
// true

var arr = [1, 2, 3, 4, 5];
arr.every(function (elem, index, arr) {
  return elem >= 3;
});
// false
```

**æ³¨æ„**ï¼Œå¯¹äºç©ºæ•°ç»„ï¼Œ`some`æ–¹æ³•è¿”å›`false`ï¼Œ`every`æ–¹æ³•è¿”å›`true`ï¼Œ**å›è°ƒå‡½æ•°éƒ½ä¸ä¼šæ‰§è¡Œ**ã€‚

```javascript
function isEven(x) { return x % 2 === 0 };

[].some(isEven) // false
[].every(isEven) // true
```


`some()`å’Œ`every()`è¿˜å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼Œç”¨æ¥ç»‘å®šå‡½æ•°ä¸­çš„`this`å…³é”®å­—ã€‚

### indexOf(), lastIndexOf()

`indexOf()`è¿”å›ç»™å®šå…ƒç´ åœ¨æ•°ç»„ä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼Œå¦‚æœæ²¡æœ‰å‡ºç°åˆ™è¿”å›-1ã€‚

```javascript
var a = ['a', 'b', 'c'];

a.indexOf('b') // 1
a.indexOf('y') // -1
```

`indexOf()`è¿˜å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¡¨ç¤ºæœç´¢çš„å¼€å§‹ä½ç½®ã€‚å¦‚æœç¬¬äºŒä¸ªå‚æ•°ä¸ºè´Ÿå€¼ï¼Œè¡¨ç¤ºä»å€’æ•°çš„ä½ç½®å¼€å§‹æœç´¢ã€‚

```javascript
['a', 'b', 'c'].indexOf('a', 1) // -1

['a', 'b', 'c'].indexOf('c', -1) // 2
```

`lastIndexOf()`è¿”å›ç»™å®šå…ƒç´ åœ¨æ•°ç»„ä¸­æœ€åä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼Œå¦‚æœæ²¡æœ‰å‡ºç°åˆ™è¿”å›-1ã€‚

```javascript
var a = [2, 5, 9, 2];
a.lastIndexOf(2) // 3
a.lastIndexOf(7) // -1
```

**æ³¨æ„**ï¼Œå¦‚æœæ•°ç»„ä¸­åŒ…å«`NaN`ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•ä¸é€‚ç”¨ï¼Œå³æ— æ³•ç¡®å®šæ•°ç»„æˆå‘˜æ˜¯å¦åŒ…å«`NaN`ã€‚

```javascript
[NaN].indexOf(NaN) // -1
[NaN].lastIndexOf(NaN) // -1
```

å› ä¸ºè¿™ä¸¤ä¸ªæ–¹æ³•å†…éƒ¨ï¼Œä½¿ç”¨ä¸¥æ ¼ç›¸ç­‰è¿ç®—ç¬¦ï¼ˆ`===`ï¼‰è¿›è¡Œæ¯”è¾ƒï¼Œ**è€Œ`NaN`æ˜¯å”¯ä¸€ä¸€ä¸ªä¸ç­‰äºè‡ªèº«çš„å€¼**ã€‚

### reduce(), reduceRight()

`reduce`æ–¹æ³•å’Œ`reduceRight`æ–¹æ³•ä¾æ¬¡å¤„ç†æ•°ç»„çš„æ¯ä¸ªæˆå‘˜ï¼Œæœ€ç»ˆç´¯è®¡ä¸ºä¸€ä¸ªå€¼ã€‚

å®ƒä»¬çš„å·®åˆ«æ˜¯ï¼Œ`reduce`æ˜¯ä»å·¦åˆ°å³å¤„ç†ï¼Œ`reduceRight`åˆ™æ˜¯ä»å³åˆ°å·¦ï¼Œå…¶ä»–å®Œå…¨ä¸€æ ·ã€‚

è¿™ä¸¤ä¸ªæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°éƒ½æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚è¯¥å‡½æ•°æ¥å—ä»¥ä¸‹å››ä¸ªå‚æ•°ã€‚

    1. ç´¯ç§¯å˜é‡ï¼Œé»˜è®¤ä¸ºæ•°ç»„çš„ç¬¬ä¸€ä¸ªæˆå‘˜
    2. å½“å‰å˜é‡ï¼Œé»˜è®¤ä¸ºæ•°ç»„çš„ç¬¬äºŒä¸ªæˆå‘˜
    3. å½“å‰ä½ç½®ï¼ˆä»0å¼€å§‹ï¼‰(å¯é€‰)
    4. åŸæ•°ç»„(å¯é€‰)

ä¸‹é¢çš„ä¾‹å­æ±‚æ•°ç»„æˆå‘˜ä¹‹å’Œã€‚

```javascript
[1, 2, 3, 4, 5].reduce(function(x, y){
  console.log(x, y)
  return x + y;
});
// 1 2
// 3 3
// 6 4
// 10 5
//æœ€åç»“æœï¼š15
```

åˆ©ç”¨`reduce`æ–¹æ³•ï¼Œå¯ä»¥å†™ä¸€ä¸ªæ•°ç»„æ±‚å’Œçš„`sum`æ–¹æ³•ã€‚

```javascript
Array.prototype.sum = function (){
  return this.reduce(function (partial, value) {
    return partial + value;
  })
};

[3, 4, 5, 6, 10].sum()
// 28
```

å¦‚æœè¦å¯¹ç´¯ç§¯å˜é‡æŒ‡å®šåˆå€¼ï¼Œå¯ä»¥æŠŠå®ƒæ”¾åœ¨`reduce`æ–¹æ³•å’Œ`reduceRight`æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°ã€‚

```javascript
[1, 2, 3, 4, 5].reduce(function(x, y){
  return x + y;
}, 10);
// 25
```

ä¸‹é¢æ˜¯ä¸€ä¸ª`reduceRight`æ–¹æ³•çš„ä¾‹å­ã€‚

```javascript
function substract(prev, cur) {
  return prev - cur;
}

[3, 2, 1].reduce(substract) // 0
[3, 2, 1].reduceRight(substract) // -4
```

ç”±äº`reduce`æ–¹æ³•ä¾æ¬¡å¤„ç†æ¯ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥å®é™…ä¸Šè¿˜å¯ä»¥ç”¨å®ƒæ¥æœç´¢æŸä¸ªå…ƒç´ ã€‚æ¯”å¦‚ï¼Œä¸‹é¢ä»£ç æ˜¯æ‰¾å‡ºé•¿åº¦æœ€é•¿çš„æ•°ç»„å…ƒç´ ã€‚

```javascript
function findLongest(entries) {
  return entries.reduce(function (longest, entry) {
    return entry.length > longest.length ? entry : longest;
  }, '');
}

findLongest(['aaa', 'bb', 'c']) // "aaa"
```

### Array.from()

`Array.from`æ–¹æ³•ç”¨äºå°†ä¸¤ç±»å¯¹è±¡è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ï¼šç±»ä¼¼æ•°ç»„çš„å¯¹è±¡å’Œå¯éå†çš„å¯¹è±¡ï¼ˆåŒ…æ‹¬ ES6 æ–°å¢çš„æ•°æ®ç»“æ„`Set`å’Œ`Map`ï¼‰ã€‚

```javascript
let arrayLike = {
    '0': 'a',
    '1': 'b',
    '2': 'c',
    length: 3  // å†³å®šäº†è¿”å›çš„æ•°ç»„é•¿åº¦
};

// ES5çš„å†™æ³•
var arr1 = [].slice.call(arrayLike); // ['a', 'b', 'c']
æˆ–è€… var arr1 = Array.prototype.slice.call(arrayLike); // ['a', 'b', 'c']

// ES6çš„å†™æ³•
let arr2 = Array.from(arrayLike); // ['a', 'b', 'c']

let arrayLike2 = {
  '0': 'a',
  '1': 'b',
  length: 3,
}

let arr = Array.from(arrayLike2); // ["a", "b", undefined]
```
å®é™…åº”ç”¨ä¸­ï¼Œå¸¸è§çš„ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡æ˜¯ DOM æ“ä½œè¿”å›çš„ NodeList é›†åˆï¼Œä»¥åŠå‡½æ•°å†…éƒ¨çš„`arguments`å¯¹è±¡ã€‚`Array.from`éƒ½å¯ä»¥å°†å®ƒä»¬è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ã€‚

```javascript
// NodeListå¯¹è±¡
let ps = document.querySelectorAll('p');
Array.from(ps).forEach(function (p) {
  console.log(p);
});

// argumentså¯¹è±¡
function foo() {
  var args = Array.from(arguments);
  // ...
}
```

åªè¦æ˜¯éƒ¨ç½²äº† `Iterator` æ¥å£çš„æ•°æ®ç»“æ„ï¼Œ`Array.from`éƒ½èƒ½å°†å…¶è½¬ä¸ºæ•°ç»„ã€‚

```javascript
Array.from('hello')
// ['h', 'e', 'l', 'l', 'o']

let namesSet = new Set(['a', 'b'])
Array.from(namesSet) // ['a', 'b']
```

å¯¹äºè¿˜æ²¡æœ‰éƒ¨ç½²è¯¥æ–¹æ³•çš„æµè§ˆå™¨ï¼Œå¯ä»¥ç”¨`Array.prototype.slice`æ–¹æ³•æ›¿ä»£ã€‚

`Array.from`è¿˜å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼Œä½œç”¨ç±»ä¼¼äºæ•°ç»„çš„`map`æ–¹æ³•ã€‚

```javascript
Array.from(arrayLike, x => x * x);
// ç­‰åŒäº
Array.from(arrayLike).map(x => x * x);

Array.from([1, 2, 3], (x) => x * x)
// [1, 4, 9]
```

ä¸‹é¢çš„ä¾‹å­æ˜¯å–å‡ºä¸€ç»„ DOM èŠ‚ç‚¹çš„æ–‡æœ¬å†…å®¹ã€‚

```javascript
let spans = document.querySelectorAll('span.name');

// map()
let names1 = Array.prototype.map.call(spans, s => s.textContent);

// Array.from()
let names2 = Array.from(spans, s => s.textContent)
```

ä¸‹é¢çš„ä¾‹å­å°†æ•°ç»„ä¸­å¸ƒå°”å€¼ä¸º`false`çš„æˆå‘˜è½¬ä¸º0ã€‚

```javascript
Array.from([1, , 2, , 3], (n) => n || 0)
// [1, 0, 2, 0, 3]
```

å¦‚æœ`map`å‡½æ•°é‡Œé¢ç”¨åˆ°äº†`this`å…³é”®å­—ï¼Œè¿˜å¯ä»¥ä¼ å…¥`Array.from`çš„ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œç”¨æ¥ç»‘å®š`this`ã€‚

```javascript
Array.from({ length: 2 }, () => 'jack')
// ['jack', 'jack']
```

ä¸Šé¢ä»£ç ä¸­ï¼Œ`Array.from`çš„ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šäº†ç¬¬äºŒä¸ªå‚æ•°è¿è¡Œçš„æ¬¡æ•°ã€‚è¿™ç§ç‰¹æ€§å¯ä»¥è®©è¯¥æ–¹æ³•çš„ç”¨æ³•å˜å¾—éå¸¸çµæ´»ã€‚

`Array.from()`çš„å¦ä¸€ä¸ªåº”ç”¨æ˜¯ï¼Œå°†å­—ç¬¦ä¸²è½¬ä¸ºæ•°ç»„ï¼Œç„¶åè¿”å›å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚

```javascript
function countSymbols(string) {
  return Array.from(string).length;
}
```

### Array.of()

`Array.of`æ–¹æ³•ç”¨äºå°†ä¸€ç»„å€¼ï¼Œè½¬æ¢ä¸ºæ•°ç»„ã€‚å¦‚æœå‚æ•°ä¸ºç©ºï¼Œåˆ™è¿”å›ä¸€ä¸ªç©ºæ•°ç»„ã€‚

```javascript
Array.of(3, 11, 8) // [3,11,8]
Array.of(3) // [3]
Array.of(3).length // 1
Array.of() // []
Array.of(undefined) // [undefined]
Array.of(1, 2) // [1, 2]
```

è¯¥æ–¹æ³•çš„ä¸»è¦ç›®çš„ï¼Œæ˜¯å¼¥è¡¥æ•°ç»„æ„é€ å‡½æ•°`Array()`çš„ä¸è¶³ã€‚å› ä¸ºå‚æ•°ä¸ªæ•°çš„ä¸åŒï¼Œä¼šå¯¼è‡´`Array()`çš„è¡Œä¸ºæœ‰å·®å¼‚ã€‚

```javascript
Array() // [] æ²¡æœ‰å‚æ•°æ—¶ï¼Œè¿”å›çš„æ—¶ç©ºæ•°ç»„
Array(3) // [, , ,]  åªæœ‰ä¸€ä¸ªå‚æ•°æ—¶ï¼Œè¿”å›çš„æ˜¯æ•°ç»„çš„é•¿åº¦
Array(3, 11, 8) // [3, 11, 8]
```

å…¼å®¹IE8:
```javascript
function ArrayOf(){
  return [].slice.call(arguments);
}
```

### copyWithin()

`copyWithin`æ–¹æ³•ï¼Œå°†æŒ‡å®šä½ç½®çš„æˆå‘˜å¤åˆ¶åˆ°å…¶ä»–ä½ç½®ï¼ˆä¼šè¦†ç›–åŸæœ‰æˆå‘˜ï¼‰ï¼Œç„¶åè¿”å›å½“å‰æ•°ç»„ã€‚**ä¼šä¿®æ”¹å½“å‰æ•°ç»„**ã€‚

```javascript
Array.prototype.copyWithin(target, start = 0, end = this.length)
```
    * targetï¼ˆå¿…éœ€ï¼‰ï¼šä»è¯¥ä½ç½®å¼€å§‹æ›¿æ¢æ•°æ®ã€‚
    * startï¼ˆå¯é€‰ï¼‰ï¼šä»è¯¥ä½ç½®å¼€å§‹è¯»å–æ•°æ®ï¼Œé»˜è®¤ä¸º 0ã€‚å¦‚æœä¸ºè´Ÿå€¼ï¼Œè¡¨ç¤ºå€’æ•°ã€‚
    * endï¼ˆå¯é€‰ï¼‰ï¼šåˆ°è¯¥ä½ç½®å‰åœæ­¢è¯»å–æ•°æ®ï¼Œé»˜è®¤ç­‰äºæ•°ç»„é•¿åº¦ã€‚å¦‚æœä¸ºè´Ÿå€¼ï¼Œè¡¨ç¤ºå€’æ•°ã€‚

```javascript
[1, 2, 3, 4, 5].copyWithin(0, 3); // åŒ [1, 2, 3, 4, 5].copyWithin(0, 3, 5)
// [4, 5, 3, 4, 5]
```

æ›´å¤šä¾‹å­:
```javascript
// å°†3å·ä½å¤åˆ¶åˆ°0å·ä½
[1, 2, 3, 4, 5].copyWithin(0, 3, 4)
// [4, 2, 3, 4, 5]

// -2ç›¸å½“äº3å·ä½ï¼Œ-1ç›¸å½“äº4å·ä½
[1, 2, 3, 4, 5].copyWithin(0, -2, -1)
// [4, 2, 3, 4, 5]

// å°†3å·ä½å¤åˆ¶åˆ°0å·ä½
[].copyWithin.call({length: 5, 3: 1}, 0, 3)
// {0: 1, 3: 1, length: 5}

// å°†2å·ä½åˆ°æ•°ç»„ç»“æŸï¼Œå¤åˆ¶åˆ°0å·ä½
let i32a = new Int32Array([1, 2, 3, 4, 5]);
i32a.copyWithin(0, 2);
// Int32Array [3, 4, 5, 4, 5]

// å¯¹äºæ²¡æœ‰éƒ¨ç½² TypedArray çš„ copyWithin æ–¹æ³•çš„å¹³å°
// éœ€è¦é‡‡ç”¨ä¸‹é¢çš„å†™æ³•
[].copyWithin.call(new Int32Array([1, 2, 3, 4, 5]), 0, 3, 4);
// Int32Array [4, 2, 3, 4, 5]
```

### find(), findIndex()

æ•°ç»„å®ä¾‹çš„`find`æ–¹æ³•ï¼Œç”¨äºæ‰¾å‡ºç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„æ•°ç»„æˆå‘˜, è¿”å›è¯¥æˆå‘˜ã€‚å¦‚æœæ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„æˆå‘˜ï¼Œåˆ™è¿”å›`undefined`ã€‚

```javascript
[1, 4, -5, 10].find((n) => n < 0)
// -5

[1, 5, 10, 15].find(function(value, index, arr) {
  return value > 9;
}) // 10
```

æ•°ç»„å®ä¾‹çš„`findIndex`æ–¹æ³•çš„ç”¨æ³•ä¸`find`æ–¹æ³•éå¸¸ç±»ä¼¼ï¼Œè¿”å›ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„æ•°ç»„æˆå‘˜çš„ä½ç½®ï¼Œå¦‚æœæ‰€æœ‰æˆå‘˜éƒ½ä¸ç¬¦åˆæ¡ä»¶ï¼Œåˆ™è¿”å›-1ã€‚

```javascript
[1, 5, 10, 15].findIndex(function(value, index, arr) {
  return value > 9;
}) // 2
```

è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼Œç”¨æ¥ç»‘å®šå›è°ƒå‡½æ•°çš„`this`å¯¹è±¡ã€‚

è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½å¯ä»¥å‘ç°`NaN`ï¼Œå¼¥è¡¥äº†æ•°ç»„çš„`indexOf`æ–¹æ³•çš„ä¸è¶³ã€‚

```javascript
[NaN].indexOf(NaN)
// -1

[NaN].findIndex(y => Object.is(NaN, y))
// 0
```

ä¸Šé¢ä»£ç ä¸­ï¼Œ`indexOf`æ–¹æ³•æ— æ³•è¯†åˆ«æ•°ç»„çš„`NaN`æˆå‘˜ï¼Œä½†æ˜¯`findIndex`æ–¹æ³•å¯ä»¥å€ŸåŠ©`Object.is`æ–¹æ³•åšåˆ°ã€‚

### fill()

`fill`æ–¹æ³•ä½¿ç”¨ç»™å®šå€¼ï¼Œå¡«å……ä¸€ä¸ªæ•°ç»„ã€‚

```javascript
['a', 'b', 'c'].fill(7)
// [7, 7, 7]

new Array(3).fill(7)
// [7, 7, 7]
```

`fill`æ–¹æ³•è¿˜å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œç”¨äºæŒ‡å®šå¡«å……çš„èµ·å§‹ä½ç½®å’Œç»“æŸä½ç½®ã€‚**ä¼šæ”¹å˜åŸæ•°ç»„**

```javascript
['a', 'b', 'c'].fill(7, 1, 2) // ä» 1 å·ä½å¼€å§‹ï¼Œå‘åŸæ•°ç»„å¡«å…… 7ï¼Œåˆ° 2 å·ä½ä¹‹å‰ç»“æŸã€‚
// ['a', 7, 'c']

let arr = [1, 2, 3, 4];
arr.fill(6, 1, 3); // [1, 6, 6, 4]
```

æ‰©å±•ï¼š
```javascript
[].fill.call( { length : 3 }, 4) // {0: 4, 1: 4, 2: 4, length: 3}
```

### entries(), keys(), values()

`entries()`ï¼Œ`keys()`å’Œ`values()`â€”â€”ç”¨äºéå†æ•°ç»„ã€‚å®ƒä»¬éƒ½è¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œå¯ä»¥ç”¨`for...of`å¾ªç¯è¿›è¡Œéå†ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯`keys()`æ˜¯å¯¹é”®åçš„éå†ã€`values()`æ˜¯å¯¹é”®å€¼çš„éå†(è°·æ­Œç›®å‰ä¸æ”¯æŒ)ï¼Œ`entries()`æ˜¯å¯¹é”®å€¼å¯¹çš„éå†ã€‚

```javascript
for (let index of ['a', 'b'].keys()) {
  console.log(index);
}
// 0
// 1

for (let elem of ['a', 'b'].values()) {
  console.log(elem);
}
// 'a'
// 'b'

for (let [index, elem] of ['a', 'b'].entries()) {
  console.log(index, elem);
}
// 0 "a"
// 1 "b"
```

å¦‚æœä¸ä½¿ç”¨`for...of`å¾ªç¯ï¼Œå¯ä»¥æ‰‹åŠ¨è°ƒç”¨éå†å™¨å¯¹è±¡çš„`next`æ–¹æ³•ï¼Œè¿›è¡Œéå†ã€‚

```javascript
let letter = ['a', 'b', 'c'];
let entries = letter.entries();
console.log(entries.next().value); // [0, 'a']
console.log(entries.next().value); // [1, 'b']
console.log(entries.next().value); // [2, 'c']
```

### includes()

`Array.prototype.includes`æ–¹æ³•è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæŸä¸ªæ•°ç»„æ˜¯å¦åŒ…å«ç»™å®šçš„å€¼ï¼Œä¸å­—ç¬¦ä¸²çš„`includes`æ–¹æ³•ç±»ä¼¼ã€‚

```javascript
[1, 2, 3].includes(2)     // true
[1, 2, 3].includes(4)     // false
[1, 2, NaN].includes(NaN) // true
```

è¯¥æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºæœç´¢çš„èµ·å§‹ä½ç½®ï¼Œé»˜è®¤ä¸º0ã€‚å¦‚æœç¬¬äºŒä¸ªå‚æ•°ä¸ºè´Ÿæ•°ï¼Œåˆ™è¡¨ç¤ºå€’æ•°çš„ä½ç½®ï¼Œå¦‚æœè¿™æ—¶å®ƒå¤§äºæ•°ç»„é•¿åº¦ï¼ˆæ¯”å¦‚ç¬¬äºŒä¸ªå‚æ•°ä¸º-4ï¼Œä½†æ•°ç»„é•¿åº¦ä¸º3ï¼‰ï¼Œåˆ™ä¼šé‡ç½®ä¸ºä»0å¼€å§‹ã€‚

```javascript
[1, 2, 3].includes(3, 3);  // false
[1, 2, 3].includes(3, -1); // true
```

æ²¡æœ‰è¯¥æ–¹æ³•ä¹‹å‰ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨æ•°ç»„çš„`indexOf`æ–¹æ³•ï¼Œæ£€æŸ¥æ˜¯å¦åŒ…å«æŸä¸ªå€¼ã€‚

```javascript
if (arr.indexOf(el) !== -1) {
  // ...
}
```

`indexOf`æ–¹æ³•å†…éƒ¨ä½¿ç”¨ä¸¥æ ¼ç›¸ç­‰è¿ç®—ç¬¦ï¼ˆ`===`ï¼‰è¿›è¡Œåˆ¤æ–­ï¼Œè¿™ä¼šå¯¼è‡´å¯¹`NaN`çš„è¯¯åˆ¤ã€‚`includes`æ²¡æœ‰è¿™ä¸ªé—®é¢˜ã€‚

```javascript
[NaN].indexOf(NaN)
// -1

[NaN].includes(NaN)
// true
```

ä¸æ”¯æŒincludesæ—¶å¯ç”¨ä»¥ä¸‹æ–¹æ³•ä»£æ›¿ï¼š
```javascript
const contains = (() =>
  Array.prototype.includes
    ? (arr, value) => arr.includes(value)
    : (arr, value) => arr.some(el => el === value)
)();
contains(['foo', 'bar'], 'baz'); // => false
```

### å…¶ä»–

1. æ•°ç»„æ±‚æœ€å¤§å€¼ï¼š

```javascript
// ES5 çš„å†™æ³•
Math.max.apply(null, [14, 3, 77])

// ES6 çš„å†™æ³•
Math.max(...[14, 3, 77])

// ç­‰åŒäº
Math.max(14, 3, 77);
```

2. é€šè¿‡`push`å‡½æ•°ï¼Œå°†ä¸€ä¸ªæ•°ç»„æ·»åŠ åˆ°å¦ä¸€ä¸ªæ•°ç»„çš„å°¾éƒ¨ã€‚

```javascript
// ES5çš„ å†™æ³•
var arr1 = [0, 1, 2];
var arr2 = [3, 4, 5];
Array.prototype.push.apply(arr1, arr2);

// ES6 çš„å†™æ³•
let arr1 = [0, 1, 2];
let arr2 = [3, 4, 5];
arr1.push(...arr2);
```

ä¸Šé¢ä»£ç çš„`ES5`å†™æ³•ä¸­ï¼Œ`push`æ–¹æ³•çš„å‚æ•°ä¸èƒ½æ˜¯æ•°ç»„ï¼Œæ‰€ä»¥åªå¥½é€šè¿‡`apply`æ–¹æ³•å˜é€šä½¿ç”¨`push`æ–¹æ³•ã€‚æœ‰äº†æ‰©å±•è¿ç®—ç¬¦ï¼Œå°±å¯ä»¥ç›´æ¥å°†æ•°ç»„ä¼ å…¥`push`æ–¹æ³•ã€‚

3. æ‰©å±•è¿ç®—ç¬¦çš„åº”ç”¨

    * å¤åˆ¶æ•°ç»„
    æ•°ç»„æ˜¯å¤åˆçš„æ•°æ®ç±»å‹ï¼Œç›´æ¥å¤åˆ¶çš„è¯ï¼Œåªæ˜¯å¤åˆ¶äº†æŒ‡å‘åº•å±‚æ•°æ®ç»“æ„çš„æŒ‡é’ˆï¼Œè€Œä¸æ˜¯å…‹éš†ä¸€ä¸ªå…¨æ–°çš„æ•°ç»„ã€‚

    ```javascript
    const a1 = [1, 2];
    const a2 = a1;

    a2[0] = 2;
    a1 // [2, 2]
    ```

    `ES5`åªèƒ½ç”¨å˜é€šæ–¹æ³•æ¥å¤åˆ¶æ•°ç»„ã€‚

    ```javascript
    const a1 = [1, 2];
    const a2 = a1.concat(); // a1ä¼šè¿”å›åŸæ•°ç»„çš„å…‹éš†ï¼Œå†ä¿®æ”¹a2å°±ä¸ä¼šå¯¹a1äº§ç”Ÿå½±å“ã€‚

    a2[0] = 2;
    a1 // [1, 2]
    ```

    æ‰©å±•è¿ç®—ç¬¦æä¾›äº†å¤åˆ¶æ•°ç»„çš„ç®€ä¾¿å†™æ³•ã€‚

    ```javascript
    const a1 = [1, 2];
    // å†™æ³•ä¸€
    const a2 = [...a1];
    // å†™æ³•äºŒ
    const [...a2] = a1;
    ```
    ä¸Šé¢çš„ä¸¤ç§å†™æ³•ï¼Œ`a2`éƒ½æ˜¯`a1`çš„å…‹éš†ã€‚

    * åˆå¹¶æ•°ç»„

    ```javascript
    // ES5
    [1, 2].concat(more)
    // ES6
    [1, 2, ...more]

    var arr1 = ['a', 'b'];
    var arr2 = ['c'];
    var arr3 = ['d', 'e'];

    // ES5çš„åˆå¹¶æ•°ç»„
    arr1.concat(arr2, arr3);
    // [ 'a', 'b', 'c', 'd', 'e' ]

    // ES6çš„åˆå¹¶æ•°ç»„
    [...arr1, ...arr2, ...arr3]
    // [ 'a', 'b', 'c', 'd', 'e' ]
    ```
    * ä¸è§£æ„èµ‹å€¼ç»“åˆ

    æ‰©å±•è¿ç®—ç¬¦å¯ä»¥ä¸è§£æ„èµ‹å€¼ç»“åˆèµ·æ¥ï¼Œç”¨äºç”Ÿæˆæ•°ç»„ã€‚

    ```javascript
    // ES5
    a = list[0], rest = list.slice(1)
    // ES6
    [a, ...rest] = list
    ```

    å¦å¤–ä¸€äº›ä¾‹å­ã€‚

    ```javascript
    const [first, ...rest] = [1, 2, 3, 4, 5];
    first // 1
    rest  // [2, 3, 4, 5]

    const [first, ...rest] = [];
    first // undefined
    rest  // []

    const [first, ...rest] = ["foo"];
    first  // "foo"
    rest   // []
    ```

    å¦‚æœå°†æ‰©å±•è¿ç®—ç¬¦ç”¨äºæ•°ç»„èµ‹å€¼ï¼Œåªèƒ½æ”¾åœ¨å‚æ•°çš„æœ€åä¸€ä½ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚

    ```javascript
    const [...butLast, last] = [1, 2, 3, 4, 5];
    // æŠ¥é”™

    const [first, ...middle, last] = [1, 2, 3, 4, 5];
    // æŠ¥é”™
    ```
4. æ•°ç»„çš„ç©ºä½

ç©ºä½ä¸æ˜¯`undefined`ï¼Œä¸€ä¸ªä½ç½®çš„å€¼ç­‰äº`undefined`ï¼Œä¾ç„¶æ˜¯æœ‰å€¼çš„ã€‚ç©ºä½æ˜¯æ²¡æœ‰ä»»ä½•å€¼ï¼Œ`in`è¿ç®—ç¬¦å¯ä»¥è¯´æ˜è¿™ä¸€ç‚¹ã€‚
```javascript
0 in [undefined, undefined, undefined] // true
0 in [, , ,] // false
```

ES5 å¯¹ç©ºä½çš„å¤„ç†ï¼Œå·²ç»å¾ˆä¸ä¸€è‡´äº†ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ä¼šå¿½ç•¥ç©ºä½ã€‚

    * `forEach()`, `filter()`, `every()` å’Œ`some()`éƒ½ä¼šè·³è¿‡ç©ºä½ã€‚
    * `map()`ä¼šè·³è¿‡ç©ºä½ï¼Œä½†ä¼šä¿ç•™è¿™ä¸ªå€¼
    * `join()`å’Œ`toString()`ä¼šå°†ç©ºä½è§†ä¸º`undefined`ï¼Œè€Œ`undefined`å’Œ`null`ä¼šè¢«å¤„ç†æˆç©ºå­—ç¬¦ä¸²ã€‚

```javascript
// forEachæ–¹æ³•
[,'a'].forEach((x,i) => console.log(i)); // 1

// filteræ–¹æ³•
['a',,'b'].filter(x => true) // ['a','b']

// everyæ–¹æ³•
[,'a'].every(x => x==='a') // true

// someæ–¹æ³•
[,'a'].some(x => x !== 'a') // false

// mapæ–¹æ³•
[,'a'].map(x => 1) // [,1]

// joinæ–¹æ³•
[,'a',undefined,null].join('#') // "#a##"

// toStringæ–¹æ³•
[,'a',undefined,null].toString() // ",a,,"
```

ES6 åˆ™æ˜¯æ˜ç¡®å°†ç©ºä½è½¬ä¸º`undefined`ã€‚

`Array.from`æ–¹æ³•ä¼šå°†æ•°ç»„çš„ç©ºä½ï¼Œè½¬ä¸º`undefined`ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªæ–¹æ³•ä¸ä¼šå¿½ç•¥ç©ºä½ã€‚

```javascript
Array.from(['a',,'b'])
// [ "a", undefined, "b" ]
```

æ‰©å±•è¿ç®—ç¬¦ï¼ˆ`...`ï¼‰ä¹Ÿä¼šå°†ç©ºä½è½¬ä¸º`undefined`ã€‚
```javascript
[...['a',,'b']]
// [ "a", undefined, "b" ]
```

`copyWithin()`ä¼šè¿ç©ºä½ä¸€èµ·æ‹·è´ã€‚
```javascript
[,'a','b',,].copyWithin(2,0) // [,"a",,"a"]
```

`fill()`ä¼šå°†ç©ºä½è§†ä¸ºæ­£å¸¸çš„æ•°ç»„ä½ç½®ã€‚
```javascript
new Array(3).fill('a') // ["a","a","a"]
```

`for...of`å¾ªç¯ä¹Ÿä¼šéå†ç©ºä½ã€‚
```javascript
let arr = [, ,];
for (let i of arr) {
  console.log(1);
}
// 1
// 1
```

ä¸Šé¢ä»£ç ä¸­ï¼Œæ•°ç»„arræœ‰ä¸¤ä¸ªç©ºä½ï¼Œ`for...of`å¹¶æ²¡æœ‰å¿½ç•¥å®ƒä»¬ã€‚å¦‚æœæ”¹æˆ`map`æ–¹æ³•éå†ï¼Œç©ºä½æ˜¯ä¼šè·³è¿‡çš„ã€‚

`entries()`ã€`keys()`ã€`values()`ã€`find()`å’Œ`findIndex()`ä¼šå°†ç©ºä½å¤„ç†æˆ`undefined`ã€‚
```javascript
// entries()
[...[,'a'].entries()] // [[0,undefined], [1,"a"]]

// keys()
[...[,'a'].keys()] // [0,1]

// values()
[...[,'a'].values()] // [undefined,"a"]

// find()
[,'a'].find(x => true) // undefined

// findIndex()
[,'a'].findIndex(x => true) // 0
```

ç©ºä½çš„å¤„ç†è§„åˆ™éå¸¸ä¸ç»Ÿä¸€ï¼Œæ‰€ä»¥å»ºè®®é¿å…å‡ºç°ç©ºä½ã€‚

å‚è€ƒæ–‡ç« ï¼š

  [Javascriptæ ‡å‡†å‚è€ƒæ•™ç¨‹ Arrayå¯¹è±¡](http://javascript.ruanyifeng.com/stdlib/array.html)

  [ECMAScript6å…¥é—¨ æ•°ç»„çš„æ‰©å±•](http://es6.ruanyifeng.com/#docs/array)
